import{_,j as g,b as a,c as U,d as D,e as s,f as o,g as l,p as N,n as k}from"./index-9dd5594f.js";const S=g({data(){return{displayConfirmation:!1,productDialog:!1,datos:[],cns:1,nombreProd:"",subtotal:0,iva:0,total:0,cantidad:"",preciosU:"",selectedProduct:null}},methods:{RegistrarV(){if(this.nombreProd===""||this.cantidad===""||this.preciosU==="")this.$toast.add({severity:"error",summary:"Error",detail:"Tienes Campos Vacios",life:3e3});else{const e={CNS:this.cns++,nombre:this.nombreProd,cantidad:this.cantidad,precio:this.preciosU,preciosP:this.preciosU*this.cantidad};this.datos.push(e),this.$toast.add({severity:"success",summary:"Confirmación",detail:"Nueva compra registrada",life:4e3}),this.nombreProd="",this.cantidad="",this.preciosU="",this.sumarCantidad()}},sumarCantidad(){let e=0;for(let u=0;u<this.datos.length;u++){const f=this.datos[u];e+=f.preciosP}const t=e*.16,h=e+t;this.subtotal=e,this.iva=t,this.total=h},editProduct(e){this.selectedProduct=e,this.productDialog=!0,this.selectedProduct.preciosP=this.selectedProduct.precio*this.selectedProduct.cantidad},confirmDeleteProduct(){this.displayConfirmation=!0},Confirmation(e){const t=this.datos.indexOf(e);t>=0&&(this.datos.splice(t,1),this.sumarCantidad(),this.displayConfirmation=!1,this.$toast.add({severity:"success",summary:"Confirmación",detail:"Compra eliminada",life:3e3}))},closeConfirmation(){this.displayConfirmation=!1},saveProduct(){for(let e=0;e<this.datos.length;e++)this.datos[e].CNS===this.selectedProduct.CNS&&(this.datos[e].nombre=this.selectedProduct.nombre,this.datos[e].cantidad=this.selectedProduct.cantidad,this.datos[e].precio=this.selectedProduct.precio,this.datos[e].preciosP=this.selectedProduct.precio*this.selectedProduct.cantidad);this.sumarCantidad(),this.$toast.add({severity:"success",summary:"Confirmación",detail:"Datos Actualizado",life:4e3}),this.productDialog=!1}}}),d=e=>(N("data-v-199ad1b0"),e=e(),k(),e),w={class:"grid"},T={class:"col-12"},$={class:"card"},I={class:"card"},B={class:"flex justify-content-between flex-column sm:flex-row"},A=d(()=>s("br",null,null,-1)),E=d(()=>s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Seguro que quieres eliminar")],-1)),F=d(()=>s("label",{for:"apepat"},"Subtotal:",-1)),O=d(()=>s("label",{for:"apepat"},"IVA (16%):",-1)),j=d(()=>s("label",{for:"apepat"},"Total:",-1)),R={class:"field"},q=d(()=>s("label",{for:"name"},"Nombre del Producto",-1)),z={class:"field"},G=d(()=>s("label",{for:"cantidad"},"Cantidad",-1)),H={class:"field"},J=d(()=>s("label",{for:"preciosU"},"Precios U.",-1));function K(e,t,h,u,f,L){const c=a("InputText"),p=a("InputNumber"),n=a("Button"),P=a("di"),r=a("Column"),b=a("Dialog"),C=a("DataTable"),v=a("Toolbar"),y=a("Panel"),V=a("Toast");return U(),D("div",w,[s("div",T,[s("div",$,[o(y,{header:"PUNTO DE VENTA (POS)",style:{height:"100%"}},{default:l(()=>[o(P,{class:"col-12"},{default:l(()=>[s("div",I,[s("div",B,[o(c,{modelValue:e.nombreProd,"onUpdate:modelValue":t[0]||(t[0]=i=>e.nombreProd=i),type:"text",placeholder:"Nombre del Producto..."},null,8,["modelValue"]),o(p,{modelValue:e.cantidad,"onUpdate:modelValue":t[1]||(t[1]=i=>e.cantidad=i),placeholder:"Cantidad"},null,8,["modelValue"]),o(p,{modelValue:e.preciosU,"onUpdate:modelValue":t[2]||(t[2]=i=>e.preciosU=i),minFractionDigits:2,maxFractionDigits:5,placeholder:"$ Precio U."},null,8,["modelValue"]),A,o(n,{type:"button",icon:"pi pi-plus",label:"Registrar",severity:"success",onClick:e.RegistrarV},null,8,["onClick"])])])]),_:1}),o(C,{value:e.datos,showGridlines:"",paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem"},{default:l(()=>[o(r,{field:"CNS",header:"Cns",sortable:"",style:{width:"20%"}}),o(r,{field:"nombre",header:"Nombre del Producto"}),o(r,{field:"precio",header:"Precio U."}),o(r,{field:"cantidad",header:"Cantidad"}),o(r,{field:"preciosP",header:"Precio P."}),o(r,{header:"Acciones",exportable:!1,style:{"min-width":"8rem"}},{body:l(i=>[o(n,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:m=>e.editProduct(i.data)},null,8,["onClick"]),o(n,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:e.confirmDeleteProduct},null,8,["onClick"]),o(b,{header:"Confirmacion",visible:e.displayConfirmation,"onUpdate:visible":t[3]||(t[3]=m=>e.displayConfirmation=m),style:{width:"350px"},modal:!0},{footer:l(()=>[o(n,{label:"No",icon:"pi pi-times",onClick:e.closeConfirmation,class:"p-button-text"},null,8,["onClick"]),o(n,{label:"Si",icon:"pi pi-pencil",onClick:m=>e.Confirmation(i.data),class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:l(()=>[E]),_:2},1032,["visible"])]),_:1})]),_:1},8,["value"]),o(v,{class:"p-mb-4"},{start:l(()=>[]),end:l(()=>[F,o(c,{id:"subtotal1",type:"text",modelValue:e.subtotal,"onUpdate:modelValue":t[4]||(t[4]=i=>e.subtotal=i),readonly:""},null,8,["modelValue"]),O,o(c,{id:"iva1",type:"text",modelValue:e.iva,"onUpdate:modelValue":t[5]||(t[5]=i=>e.iva=i),readonly:""},null,8,["modelValue"]),j,o(c,{id:"total1",type:"text",modelValue:e.total,"onUpdate:modelValue":t[6]||(t[6]=i=>e.total=i),readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),o(b,{visible:e.productDialog,"onUpdate:visible":t[10]||(t[10]=i=>e.productDialog=i),style:{width:"450px"},header:"Detalles del Producto",modal:!0,class:"p-fluid"},{footer:l(()=>[o(n,{label:"Save",icon:"pi pi-check",text:"",onClick:e.saveProduct},null,8,["onClick"])]),default:l(()=>[s("div",R,[q,o(c,{modelValue:e.selectedProduct.nombre,"onUpdate:modelValue":t[7]||(t[7]=i=>e.selectedProduct.nombre=i),type:"text",placeholder:"Nombre del Producto..."},null,8,["modelValue"])]),s("div",z,[G,o(p,{modelValue:e.selectedProduct.cantidad,"onUpdate:modelValue":t[8]||(t[8]=i=>e.selectedProduct.cantidad=i),placeholder:"Cantidad"},null,8,["modelValue"])]),s("div",H,[J,o(p,{modelValue:e.selectedProduct.precio,"onUpdate:modelValue":t[9]||(t[9]=i=>e.selectedProduct.precio=i),placeholder:"$ Precio U.",minFractionDigits:2,maxFractionDigits:5},null,8,["modelValue"])])]),_:1},8,["visible"])]),o(V)])])}const Q=_(S,[["render",K],["__scopeId","data-v-199ad1b0"]]);export{Q as default};
